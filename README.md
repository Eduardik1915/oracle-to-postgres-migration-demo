# Projekts: MigrÄcija no Oracle uz PostgreSQL

## Projekta apraksts

Å is ir pet-projekts, kura mÄ“rÄ·is ir demonstrÄ“t datu bÄzes migrÄciju no Oracle uz PostgreSQL.  
Projekts ietver trÄ«s savstarpÄ“ji saistÄ«tas tabulas: `customers`, `products` un `orders`.  
FokusÄ ir atÅ¡Ä·irÄ«bas sintaksÄ“, datu tipos un uzvedÄ«bÄ starp abÄm datu bÄzu pÄrvaldÄ«bas sistÄ“mÄm.

---

## ğŸ“Š Tabulu izmaiÅ†as migrÄcijas laikÄ

###  ğŸ†” ID lauka tips
 - **Oracle**: `NUMBER GENERATED BY DEFAULT AS IDENTITY`
 - **PostgreSQL**: `INTEGER GENERATED BY DEFAULT AS IDENTITY`

 **Paskaidrojums:**  PostgreSQL ar IDENTITY var izmantot tikai `SMALLINT`, `INTEGER` vai `BIGINT`. `SMALLINT` bÅ«tu par mazu priekÅ¡ ID, bet `BIGINT` paredzÄ“s Ä¼oti lielos datu apjomiem.
 TÄpÄ“c izvÄ“lÄ“ts vidÄ“jais variants - `INTEGER`.

---

###  ğŸ”¤ Teksta lauku tips
 - **Oracle**: `VARCHAR2`
 - **PostgreSQL**: `VARCHAR`

**Paskaidrojums:** PostgreSQL neatbalsta `VARCHAR2`, tÄ vietÄ jÄizmanto `VARCHAR`. 
                   AtÅ¡Ä·irÄ«bÄ no Oracle, PostgreSQL interpretÄ“ tukÅ¡u virkni (`''`) kÄ tukÅ¡u virkni, nevis kÄ `NULL`.  
                   TÄpÄ“c gadÄ«jumos, kad lauks tiek pÄrbaudÄ«ts uz `NULL`, var izmantot `NULLIF(lauks, '')`, lai panÄktu lÄ«dzÄ«gu uzvedÄ«bu.

---

###  ğŸ”’ UNIQUE
 - **Oracle**: `email VARCHAR2(100) UNIQUE`
 - **PostgreSQL**: `CONSTRAINT uniq_customer_email UNIQUE(email)`
 
**Paskaidrojums:** PostgreSQL atbalsta tieÅ¡i tÄdu paÅ¡u semantiku, kÄ Oracle, bet tika nolemts UNIQUE CONSTRAINT izveidot atseviÅ¡Ä·i,
                   jo tas dod lasÄmu un saprotamu vÄrdu, kas turpmÄk palÄ«dzÄ“s Ä“rtÄk ar to strÄdÄt.

---

###  ğŸ•’ Datumu lauku tips
 - **Oracle**: `created_date DATE DEFAULT SYSDATE`
 - **PostgreSQL**: `created_date TIMESTAMP DEFAULT LOCALTIMESTAMP`

**Paskaidrojums:** Oracle tips `DATE` tiek aizvietots ar `TIMESTAMP`.
                   Oracle tekoÅ¡Ä laika operators `SYSDATE` tike aizvietots ar `LOCALTIMESTAMP`.

---

### âœ… Boolean lauku tips
 - **Oracle**: `is_active NUMBER(1) DEFAULT 1 CHECK (is_active IN (0, 1))`
 - **PostgreSQL**: `is_active BOOLEAN DEFAULT TRUE`

**Paskaidrojums:** Oracle neatbalsta `BOOLEAN` tipu, bet PostgreSQL atbalsta.

---

### ğŸ”¢ Ciparu lauku tips
 - **Oracle**: `NUMBER`
 - **PostgreSQL**: `NUMERIC`

---

## ğŸ§© ProcedÅ«ru izmaiÅ†as migrÄcijas laikÄ

### ğŸ” IN/OUT
 - **Oracle**: `NorÄda pÄ“c parametra`
 - **PostgreSQL**: `NorÄda pirms parametra`

---

### ğŸ¯ Kursora tips 
 - **Oracle**: `SYS_REFCURSOR`
 - **PostgreSQL**: `REFCURSOR`

---

 ### ğŸ” SELECT INTO -> NOT EXISTS 
 - **Oracle**: 

 ```
 SELECT COUNT(*) INTO v_exists
 FROM customers
 WHERE customer_id = p_customer_id;

 IF v_exists = 0 THEN
    RAISE_APPLICATION_ERROR(-20001, 'Customer not found');
END IF;
```

 - **PostgreSQL**:

```
IF NOT EXISTS(
	SELECT 1 FROM customers WHERE customer_id = p_customer_id
) THEN
	RAISE EXCEPTION 'Customer not found' USING ERRCODE = 'P0001';
END IF;
```

**Paskaidrojums:** PostgreSQL atbalsta NOT EXISTS/EXISTS izmantoÅ¡anu tieÅ¡i IF kontekstÄ, kas padara kodu Ä«sÄku un saprotamÄku. Oracle Å¡Ädu iespÄ“ju nav.

---

### âš ï¸ KÄ¼Å«du izsaukums
 - **Oracle**: `RAISE_APPLICATION_ERROR(-20001, 'Customer not found');`
 - **PostgreSQL**: `RAISE EXCEPTION 'Customer not found' USING ERRCODE = 'P0001';`

**Paskaidrojums:** Oracle kÄ¼Å«du kodi (-20001 utt.) tiek aizstÄti ar PostgreSQL lietotÄja kÄ¼Å«du kodiem (P0001â€“P9999).
                   PostgreSQL gadÄ«jumÄ kÄ¼Å«das kods jÄnorÄda skaidri ar USING ERRCODE.